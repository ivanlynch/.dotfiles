---
- name: Install Workspace
  hosts: localhost
  become: true
  vars:
    ansible_dir: "{{ lookup('env', 'PWD') }}"
  tasks:
    - name: Mostrar directorio actual
      command: pwd
      register: pwd_out
    - debug: var=pwd_out.stdout

    - name: Listar archivos en el directorio actual
      command: ls -l
      register: ls_out
    - debug: var=ls_out.stdout

    - name: Debug variables
      debug:
        msg: 
          - "ansible_dir: {{ ansible_dir }}"
          - "playbook_dir: {{ playbook_dir }}"
          - "inventory_dir: {{ inventory_dir }}"

    - name: Update Aptitude
      apt:
        update_cache: yes
        cache_valid_time: 3600

    - name: Mostrar directorio actual en fish.yml
      command: pwd
      register: pwd_fish
    - debug: var=pwd_fish.stdout

    - name: Listar archivos en files/ desde fish.yml
      command: ls -l files/
      register: ls_files
    - debug: var=ls_files.stdout

    - name: Copiar configuraci√≥n de Fish
      copy:
        src: files/config.fish
        dest: "{{ ansible_env.HOME }}/.config/fish/config.fish"
        mode: '0644' 